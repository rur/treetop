namespace = "github.com/treetop/examples"
page = "ticket"

[views]
  [views.base]
    name = "base"
    handler = "treetop.Delegate(\"content\")"
    template = "local://base.html"
    doc = "HTML template for demo example site"
    uri = "/ticket"
    [views.base.blocks]

      [[views.base.blocks.content]]
        name = "ticket-form-content"
        default = true
        path = "/ticket"
        handler = "ticketHandler"
        template = "examples/ticket/templates/content/ticketFormContent.html.tmpl"
        method = "GET"
        doc = "Landing page for ticket wizard"
        [views.base.blocks.content.blocks]

          [[views.base.blocks.content.blocks.form]]
            name = "new-helpdesk-ticket"
            path = "/ticket/helpdesk/new"
            handler = "newHelpdeskTicketHandler"
            template = "examples/ticket/templates/content/form/newHelpdeskTicket.html.tmpl"
            method = "GET"
            doc = "Form designed for creating helpdesk tickets"
            [views.base.blocks.content.blocks.form.blocks]

              [[views.base.blocks.content.blocks.form.blocks.reported-by]]
                name = "helpdesk-reported-by"
                fragment = true
                default = true
                path = "/ticket/helpdesk/update-reported-by"
                handler = "helpdeskReportedByHandler"
                template = "examples/ticket/templates/content/form/reportedBy/helpdeskReportedBy.html.tmpl"
                method = "GET"
                doc = "Options for notifying help desk of who reported the issue"
                [views.base.blocks.content.blocks.form.blocks.reported-by.blocks]

                  [[views.base.blocks.content.blocks.form.blocks.reported-by.blocks.find-reported-by]]
                    name = "find-helpdesk-reported-by"
                    fragment = true
                    path = "/ticket/helpdesk/find-reported-by"
                    handler = "findTeamMemberHandler"
                    template = "examples/ticket/templates/content/form/reportedBy/findReportedBy/findHelpdeskReportedBy.html.tmpl"
                    method = "GET"
                    doc = "query string to find a user to select"

              [[views.base.blocks.content.blocks.form.blocks.upload-file-list]]
                name = "attachment-file-list"
                fragment = true
                default = true
                handler = "helpdeskAttachmentFileListHandler"
                template = "examples/ticket/templates/content/form/uploadFileList/uploadedHelpdeskFiles.html.tmpl"
                doc = "Default helpdesk attachment file list template handler, parse file info from query string"

              [[views.base.blocks.content.blocks.form.blocks.upload-file-list]]
                name = "uploaded-helpdesk-files"
                fragment = true
                path = "/ticket/helpdesk/upload-attachment"
                handler = "uploadedFilesHandler"
                template = "examples/ticket/templates/content/form/uploadFileList/uploadedHelpdeskFiles.html.tmpl"
                method = "POST"
                doc = "Load a list of uploaded files, save to storage and return metadata to the form"

          [[views.base.blocks.content.blocks.form]]
            name = "new-software-ticket"
            path = "/ticket/software/new"
            handler = "newSoftwareTicketHandler"
            template = "examples/ticket/templates/content/form/newSoftwareTicket.html.tmpl"
            method = "GET"
            doc = "Form designed for creating software tickets"

          [[views.base.blocks.content.blocks.form]]
            name = "new-systems-ticket"
            path = "/ticket/systems/new"
            handler = "newSystemsTicketHandler"
            template = "examples/ticket/templates/content/form/newSystemsTicket.html.tmpl"
            method = "GET"
            doc = "Form designed for creating systems tickets"

      [[views.base.blocks.nav]]
        name = "demo-nav"
        default = true
        handler = "treetop.Noop"
        template = "local://nav.html"
        doc = "Navigate between the different example apps"

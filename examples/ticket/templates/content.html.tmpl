<div id="content">
	<hr>
	<h3>Create a new issue <span class="badge badge-warning">WIP</span></h3>
  	<section class="mt-3 mb5">
	<p>A more involved HTML form workflow.</p>

    <div class="d-none" id="error-message"></div>

	<form id="issue" treetop>
		<div class="form-group row">
			<label for="inputTitle" class="col-sm-2 col-form-label">Summary</label>
			<div class="col-sm-10">
				<input autofocus="autofocus" required type="text" name="summary" class="form-control" id="inputTitle" placeholder="Title for you issue" value="{{ .Summary }}">
			</div>
		</div>
		<div class="form-group row">
			<label for="departmentSelect" class="col-sm-2 col-form-label">Department</label>
			<div class="col-sm-10">
				<select class="form-control" id="departmentSelect" name="department" onchange="document.getElementById('update-department').click()" required="required">
					<option disabled value=""{{ if eq .Dept "" }} selected{{ end }}>-- choose one --</option>
					<option value="helpdesk"{{ if eq .Dept "helpdesk" }} selected{{ end }}>Helpdesk</option>
					<option value="software"{{ if eq .Dept "software" }} selected{{ end }}>Software Development</option>
					<option value="systems"{{ if eq .Dept "systems" }} selected{{ end }}>Systems & IT</option>
				</select>
				{{/* submit button will update form when department is changed */}}
				<button class="d-none" id="update-department" treetop-submitter formnovalidate formaction="/ticket/get-form"></button>
			</div>
		</div>

		{{ block "form" .Form}}
		<h4 id="form" class="text-muted font-weight-light text-center mt-4">Please select a Department</h4>
		{{ end }}

	</form>
	</section>
</div>

{{ define "treetop-config" }}
<script>
    // activate treetop with defaults
    window.TREETOP_CONFIG = true;
</script>
{{ end }}
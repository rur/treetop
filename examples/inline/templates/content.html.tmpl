<div id="content">
  <hr>
  <div class="container">
  <h3>Edit in Place</h3>
  <section class="mt-3 mb5">
    <p>Load a mini-form to edit text fields in place.</p>

    <div class="d-none" id="error-message"></div>

    <div class="card">
      <h5 class="card-header">User Profile</h5>
      <div class="card-body">
        <div class="container">
          <div class="row">
            <div class="col-md-6 mb-3">
              {{ template "first-name" .FirstName }}
            </div>

            <div class="col-md-6 mb-3">
              {{ template "surname" .Surname }}
            </div>
          </div>

          <div class="mb-3">
            {{ template "email" .Email }}
          </div>

          <div class="mb-3">
            {{ template "country" .Country }}
          </div>

          <div class="mb-3">
            {{ template "description" .Description }}
          </div>

        </div>
      </div>
    </div>

    <div class="mt-5 border rounded bg-light text-muted p-3 small mb-3">
      <h6 class="muted">Notes:</h6>
      <ul class="list-group list-group-flush">
        <li class="list-group-item bg-light">No JS boilerplate; just HTML forms, <a href="https://getbootstrap.com/docs/4.0/components/forms/" target="_blank">Bootstrap</a> styles and <a href="https://github.com/rur/treetop-client" target="_blank">Treetop</a> template requests.</li>
        <li class="list-group-item bg-light">Updates occur <em>without</em> navigation history entries being created, similar to SPA behavior.</li>
        <li class="list-group-item bg-light">Persistent state is emulated with an encoded cookie that will expire in one hour.</li>
      </ul>
    </div>

    <div class="mt-2 border rounded bg-light text-muted p-3 small mb-5">
      <h6 class="muted">Treetop View Hierarchy</h6>
      <p>Debug print-out of the page view hierarchy as an ASCII tree</p>
      <pre class="small bg-dark text-white p-3 pb-4 mb-1 rounded">{{ .ViewTree }}</pre>
    </div>
  </section>
  </div>

</div>

{{ define "treetop-config" }}
<script>
  window.TREETOP_CONFIG = {
    mountAttrs: {
      // autofocus attribute component will cause an input element
      // to be focused and have the cursor placed at the end of the input (buggy).
      "autofocus": (emt) => {
        emt.focus()
        setTimeout(function(){ emt.selectionStart = emt.selectionEnd = 10000; }, 0);
      }
    }
  }
</script>
{{ end }}
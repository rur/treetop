namespace: github.com/rur/treetop-example
pages:
  - name: home
    doc: Landing page of the site
    uri: /admin
    blocks:
      nav:
        - name: nav
          default: true
          doc: principle navigatio
          handler: treetop.Constant("ok")

      wrapper:
        - name: landing
          default: true
          doc: General admin search area
          path: /admin
          blocks:
            landing-results:
              - name: user-search-results
                path: /admin/user-search

              - name: role-search-results
                path: /admin/role-search

  - name: history
    doc: Land on current days activity by default
    uri: /admin/history
    blocks:
      nav:
        - name: nav
          default: true

      wrapper:
        - name: search
          default: true
          doc: Allow history log to be searched
          path: /admin/history

  - name: account
    doc: View and edit user account information. Admin controls also.
    uri: /admin/account
    blocks:
      nav:
        - name: nav
          default: true

      wrapper:
        - name: landing
          default: true
          doc: Administer admin user account
          path: /admin/account


  - name: user
    doc: View and edit user roles
    uri: /admin/users
    blocks:
      nav:
        - name: nav
          default: true

        - name: nav2

      wrapper:
        - name: all-users
          default: true
          path: /admin/users

        - name: base
          doc: Display user information
          path: /admin/users/{user}
          blocks:
            content:
              - default: true
                name: roles-list
                path: /admin/users/{user}/roles
                includes:
                  - user > nav

              - name: roles-edit
                path: /admin/users/{user}/edit
                includes:
                  - user > nav2

              - name: assign-roles
                path: /admin/users/{user}/assign
                includes:
                  - user > nav2

              - fragment: true
                name: find-roles-results
                path: /admin/users/{user}/find-role-roles
                includes:
                  - user > nav

              - fragment: true
                name: assign-role-complete
                path: /admin/users/{user}/assign-roles-complete
                includes:
                  - user > nav2

              - fragment: true
                name: revoke-role-complete
                path: /admin/users/{user}/revoke-roles-complete
                includes:
                  - user > nav

  - name: role
    doc: View and edit role membership list
    uri: /admin/roles
    blocks:
      nav:
        - name: nav
          default: true

        - name: nav2

      wrapper:
        - name: all-roles
          doc: show summary of all roles
          default: true
          path: /admin/roles

        - name: role
          path: /admin/roles/{role}
          merge: testing-gen-merge
          blocks:
            content:
              - default: true
                name: users-list
                path: /admin/roles/{role}/users
                includes:
                  - role > nav

              - name: users-edit
                path: /admin/roles/{role}/edit
                includes:
                  - role > nav2

              - name: assign-users
                path: /admin/roles/{role}/assign
                includes:
                  - role > nav

              - fragment: true
                name: assign-results-roles
                path: /admin/roles/{role}/find-user-roles-results
                includes:
                  - role > nav2

              - fragment: true
                name: assign-results-users
                path: /admin/roles/{role}/find-users-results
                includes:
                  - role > nav

              - fragment: true
                name: assign-role-complete
                path: /admin/roles/{role}/assign-role-users-complete
                includes:
                  - role > nav2

              - fragment: true
                name: revoke-users-complete
                path: /admin/roles/{role}/assign-users-complete
                includes:
                  - role > nav
